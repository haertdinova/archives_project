# Архив сайта журнала «Философические письма. Русско-европейский диалог»

«Философические письма. Русско-европейский диалог» – академический рецензируемый журнал, посвященный теоретическим, эмпирическим и историческим исследованиям интеллектуального диалога России и Европы как равноправных партнеров. На сайте опубликованы данные о журнале (редколлегия, контакты и т.д.), информация для авторов статей, читателей, архив статей и др.

## wpull

**Описание раздела**

В разделе содержится информация о результатах сбора архива сайта при помощи скрипта массовой загрузки с использованием библиотеки Python **wpull**.

**Результаты**

В ходе работы удалось успешно сохранить сайт журнала, что подтверждается при попытке открыть и просмотреть архив в сервисе [REPLAY WEBPAGE](https://replayweb.page/) (не прогружаются лишь английские версии отдельных страниц и отдельные ссылки, ведущие на внешние ресурсы, что вполне ожидаемо). Общий объем содержимого сайта составил 933 МБ. 

![](/phillet.hse.ru/replaywebpage.jpg)

## ArchiveReady

**Описание раздела**

В разделе содержатся данные, полученные в ходе подсчёта показателей архивируемости сайта по методике **CLEAR** с помощью сервиса **ArchiveReady**, а также анализ полученных результатов.

**Результаты**

![](/phillet.hse.ru/archiveready.jpg)

Несмотря на относительно успешный эксперимент по загрузке сайта при помощи **wpull**, он получил средний, близкий к низкому индекс архивируемости – 64%, обусловленный низкими или средними показателями всех аспектов: доступности (Accessibility), целостности (Cohesion),  метаданных (Metadata) и соответствия стандартам (Standards compliance).  Изучение подробных результатов показало следующее:
1. У сайта низкий показатель доступности, который связан с неудачно организованным кодом, отсутствием sitemap, который упростил бы архивацию за счет готового представления структуры сайта, наличием команд disallow в robots.txt, а также проблемами с rss-файлом, увеличивающими риск некорректного сохранения страниц.
2. На показатель соответствия стандартам повлияли некорректные html- и css-файлы, а также проблемы с rss-файлом.
3. Некоторое снижение показателя целостности связано с наличием внешних файлов и скриптов, затрудняющим процесс архивации.
4. Показатель метаданных снизился из-за недоступности HTTP-заголовков. У этого фактора небольшая значимость, но, поскольку факторов, влияющих на рейтинг метаданных, совсем не много, его влияние оказалось ощутимым.

## metawarc

**Описание раздела**

В разделе содержатся результаты анализа метаданных содержимого warc-файлов с помощью утилиты командной строки **metawarc**. В работе использовались следующие команды:
 1. **analyze**
 2. **metadata**
 3. **index**
 4. **dump**

**Результаты**

 1. `metawarc analyze phillet.hse.ru.warc.gz`
	  | mimes                               | files | files     | share       |
	  |-------------------------------------|-------|-----------|-------------|
	  | application/pdf                     | 435   | 885740369 | 89.115      |
	  | text/html                           | 7776  | 50490961  | 5.07993     |
	  | image/png                           | 99    | 35614169  | 3.58317     |
	  | image/jpeg                          | 21    | 13964337  | 1.40496     |
	  | application/json                    | 4061  | 3590733   | 0.361266    |
	  | application/javascript              | 11    | 2871999   | 0.288954    |
	  | application/x-bibtex                | 406   | 773957    | 0.0778684   |
	  | application/x-Research-Info-Systems | 406   | 740568    | 0.0745091   |
	  | text/css                            | 2     | 133464    | 0.0134279   |
	  | application/octet-stream            | 3     | 6502      | 0.000654171 |
	  | image/gif                           | 1     | 2777      | 0.000279396 |
	  | text/plain                          | 1     | 262       | 2.636e-05   |
	  | #total                              | 13222 | 993930098 | 100         |
	
  	Как и ожидалось, наибольшим весом обладают pdf-файлы, поскольку это научный журнал, основным продуктом производства которого являются статьи (зачастую очень большие).
	 
 3. `metawarc metadata --output phillet.hse.ru_meta.jsonl phillet.hse.ru.warc.gz`

	Полученные метаданные записаны в файл **phillet.hse.ru_meta.jsonl**. Сбор метаданных оказался в большей части успешным, однако в ходе работы возникли ошибки, отражённые в файле **metadata_errors.txt**.
 
 4. `metawarc index phillet.hse.ru.warc.gz`
 
	 В результате работы команды на основе метаданных была создана база данных (файл **metawarc.db**), которая может использоваться для реализации других команд, например, **stats** или **dump**.
 
 5. `metawarc dump -m 'application/pdf' -o pdf`

	В результате работы команды был сформированы [под-архив](https://disk.yandex.ru/d/htNQ4u1vEjizTg), включающий все pdf-файлы, содержащиеся в основном архиве. Эта команда была выполнена для быстрого скачивания всех статей, представлявших основной интерес при сохранении сайта, однако стоит отметить, что в под-архив могли попасть не только тексты статей, но и дополнительные материалы, так как настройки команды не позволяют разделить файлы по их содержанию.
	В команде использовался параметр mime (content type), а не extension, поскольку при просмотре базы данных на [специальном ресурсе](https://inloop.github.io/) выяснилось, что не все метаданные загрузились корректно, в связи с чем у некоторых файлов отсутствуют данные о расширении, имени и т.д.

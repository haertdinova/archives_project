# Архив сайта журнала «History HSE»

«History HSE» – рецензируемый научный журнал, публикующий материалы широкого спектра дисциплин, направлений и предметных полей исторической науки. Сайт давно не обновлялся, сейчас там опубликованы данные о журнале (редколлегия, контакты и т.д.), информация для авторов статей, читателей, первый выпуск и др.

## wpull

**Описание раздела**

В разделе содержится информация о результатах сбора архива сайта при помощи скрипта массовой загрузки с использованием библиотеки Python **wpull**.

**Результаты**

В ходе работы удалось успешно сохранить сайт журнала, что подтверждается при попытке открыть и просмотреть архив в сервисе [REPLAY WEBPAGE](https://replayweb.page/) (не прогружаются лишь отдельные ссылки, ведущие на внешние ресурсы, что вполне ожидаемо). Общий объем содержимого сайта составил 6,92 МБ. 

![](/history.hse.ru/replaywebpage.jpg)

## ArchiveReady

**Описание раздела**

В разделе содержатся данные, полученные в ходе подсчёта показателей архивируемости сайта по методике **CLEAR** с помощью сервиса **ArchiveReady**, а также анализ полученных результатов.

**Результаты**

![](/history.hse.ru/archiveready.jpg)

Несмотря на успешный эксперимент по загрузке сайта при помощи **wpull**, он получил средний индекс архивируемости – 70%, обусловленный низкими или средними показателями всех аспектов: доступности (Accessibility), целостности (Cohesion), метаданных (Metadata) и соответствия стандартам (Standards compliance).  Изучение подробных результатов показало следующее:
1. У сайта низкий показатель доступности, который связан с неудачно организованным кодом, [вымершей ссылкой](https://history.hse.ru/index) (хотя при ручной проверке ссылка оказалась актуальной), а также отсутствием sitemap, который упростил бы архивацию за счет готового представления структуры сайта, и наличием команд disallow в robots.txt.
2. На показатель соответствия стандартам повлияли некорректные html- и css-файлы.
3. Некоторое снижение показателя целостности связано с наличием внешних файлов и скриптов, затрудняющим процесс архивации.
4. Показатель метаданных снизился из-за недоступности HTTP-заголовков. У этого фактора небольшая значимость, но, поскольку факторов, влияющих на рейтинг метаданных, совсем не много, его влияние оказалось ощутимым.

## metawarc

**Описание раздела**

В разделе содержатся результаты анализа метаданных содержимого warc-файлов с помощью утилиты командной строки **metawarc**. В работе использовались следующие команды:
 1. **analyze**
 2. **metadata**
 3. **index**
 4. **dump**

**Результаты**

 1. `metawarc analyze history.hse.ru.warc.gz`
	  | mimes                    | files | size | share      |
	  |--------------------------|-------|----------|------------|
	  | application/pdf          | 4     | 5068370  | 45.8411    |
	  | application/javascript   | 9     | 2863604  | 25.9       |
	  | text/html                | 213   | 1592080  | 14.3996    |
	  | image/png                | 102   | 964819   | 8.72635    |
	  | application/json         | 1     | 296356   | 2.68041    |
	  | text/css                 | 3     | 135031   | 1.22129    |
	  | image/jpeg               | 1     | 126581   | 1.14487    |
	  | application/octet-stream | 3     | 6502     | 0.0588077  |
	  | image/gif                | 1     | 2777     | 0.0251167  |
	  | text/plain               | 1     | 262      | 0.00236967 |
	| #total                   | 338   | 11056382 | 100        |
    
	Как и ожидалось, наибольшим весом обладают pdf-файлы, поскольку это научный журнал, основным продуктом производства которого являются статьи (зачастую очень большие). Также большую часть занимают html- и javascript-файлы, обеспечивающие работу сайта. Вероятно, соотношение могло бы быть другим, если бы на сайте было опубликовано больше статей (соответственно, изображений – обложек выпусков журнала).
	 
 3. `metawarc metadata --output history.hse.ru_meta.jsonl history.hse.ru.warc.gz`

	Полученные метаданные записаны в файл **history.hse.ru_meta.jsonl**. Сбор метаданных оказался в большей части успешным, однако в ходе работы возникли ошибки, отражённые в файле **metadata_errors.txt**.
 
 4. `metawarc index history.hse.ru.warc.gz`
 
	 В результате работы команды на основе метаданных была создана база данных (файл **metawarc.db**), которая может использоваться для реализации других команд, например, **stats** или **dump**.
 
 5. `metawarc dump -m 'application/pdf' -o pdf`

	В результате работы команды был сформированы [под-архив](https://disk.yandex.ru/d/OHyi7YXL_gQnxA), включающий все pdf-файлы, содержащиеся в основном архиве. Эта команда была выполнена для быстрого скачивания всех статей, представлявших основной интерес при сохранении сайта, однако стоит отметить, что в под-архив попали не только тексты статей, но и дополнительные материалы, так как настройки команды не позволяют разделить файлы по их содержанию.
	В команде использовался параметр mime (content type), а не extension, поскольку при просмотре базы данных на [специальном ресурсе](https://inloop.github.io/) выяснилось, что не все метаданные загрузились корректно, в связи с чем у некоторых файлов отсутствуют данные о расширении, имени и т.д.
